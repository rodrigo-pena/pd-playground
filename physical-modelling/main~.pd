#N canvas -9 -9 1024 666 10;
#X obj 99 774 output~;
#X obj 1211 174 1;
#X obj 1252 174 -1;
#X floatatom 1211 232 5 0 0 0 - - -;
#X obj 1252 150 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 1211 150 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 784 174 1;
#X obj 825 174 -1;
#X floatatom 784 232 5 0 0 0 - - -;
#X obj 825 150 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 784 150 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 1128 62 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 44 80 hsl 128 15 0.999 1 0 0 empty empty empty -2 -8 0 10 -4160
-258113 -1 11000 1;
#X floatatom 41 104 10 0 0 0 - - -;
#X obj 41 129 s gainPerDelay;
#X obj 1038 224 r gainPerDelay;
#X obj 1285 157 loadbang;
#X obj 858 157 loadbang;
#X obj 971 248 physicalModel~;
#X obj 217 862 output~;
#X obj 568 745 0.9;
#X obj 602 728 loadbang;
#X floatatom 604 758 5 0 0 0 - - -;
#X obj 231 80 hsl 128 15 0.05 5 0 0 empty empty empty -2 -8 0 10 -4034
-1 -1 800 1;
#X floatatom 228 104 5 0 0 0 - - -;
#X obj 402 80 hsl 128 15 0 1 0 0 empty empty empty -2 -8 0 10 -257985
-1 -1 1800 1;
#X floatatom 399 104 5 0 0 0 - - -;
#X obj 399 128 s attackPos;
#X obj 575 80 hsl 128 15 0 1 0 0 empty empty empty -2 -8 0 10 -258113
-1 -1 2800 1;
#X floatatom 572 104 5 0 0 0 - - -;
#X obj 572 128 s pickupPos;
#X obj 272 295 int;
#X floatatom 272 323 5 0 0 0 - - -;
#X text 301 348 Total delay line size (M+N+P);
#X obj 497 503 -;
#X obj 511 472 t b;
#X obj 497 557 s P;
#X floatatom 497 530 5 0 0 0 - - -;
#X obj 456 223 r attackPos;
#X obj 539 240 *;
#X obj 577 196 - 2;
#X obj 539 213 t b;
#X obj 539 268 int;
#X obj 539 323 s M;
#X obj 228 128 s stringSize;
#X obj 272 194 r stringSize;
#X obj 272 349 s L;
#X obj 577 168 r L;
#X obj 497 339 -;
#X obj 497 312 t b;
#X floatatom 539 296 5 0 0 0 - - -;
#X obj 641 356 - 1;
#X obj 599 400 *;
#X obj 599 373 t b;
#X obj 517 383 r pickupPos;
#X obj 599 428 int;
#X floatatom 599 456 5 0 0 0 - - -;
#X obj 599 483 s N;
#X text 568 323 Size of the delay line M;
#X text 625 483 Size of the delay line N;
#X text 525 558 Size of the delay line P;
#X text 397 64 Bridge;
#X text 512 64 Nut;
#X text 685 64 Nut;
#X text 571 64 AttackPos;
#X text 166 64 1;
#X text 39 64 0.999;
#X text 226 64 0m;
#X text 349 64 5m;
#X obj 217 774 fexpr~ if($x1*$f2 >= 1 \, 2/3 \, if($x1*$f2 <= -1 \,
-2/3 \, ($x1 - $x1*$x1*$x1/3)*$f2)) \;;
#X obj 568 718 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 984 122 r M;
#X obj 1011 174 r N;
#X obj 1025 199 r P;
#X obj 43 196 hsl 128 15 0 1000 0 0 empty empty empty -2 -8 0 10 -159808
-257985 -1 3000 1;
#X floatatom 40 244 10 0 0 0 - - -;
#X obj 40 268 s linDensity;
#X text 39 180 0;
#X obj 40 219 * 0.0001;
#X obj 43 333 hsl 128 15 0 500 0 0 empty empty empty -2 -8 0 10 -261234
-1 -1 10200 1;
#X floatatom 40 357 10 0 0 0 - - -;
#X text 39 317 0;
#X text 147 317 500N;
#X obj 40 381 s tensionK;
#X obj 136 476 r linDensity;
#X obj 40 452 r tensionK;
#X floatatom 92 574 10 0 0 0 - - -;
#X obj 40 477 pow 0.5;
#X obj 136 500 pow 0.5;
#X obj 92 546 /;
#X obj 92 517 t b;
#X obj 92 601 s waveVelocity;
#X obj 272 267 expr $f1/$f2;
#X obj 341 218 r waveVelocity;
#X obj 341 243 / 44100;
#X floatatom 388 260 10 0 0 0 - - -;
#X text 576 40 Pickup position (from \; the attack position) \;;
#X text 417 41 Attack position \; at the string \;;
#X text 224 52 Length of the string (m) \;;
#X text 37 52 Gain per spatial sample \;;
#X text 26 165 String linear density (kg/m) \;;
#X text 22 421 Calculating the wave propagagation \; velocity at the
string \;;
#X text 45 305 String's tension (N) \;;
#X text 271 167 Calculating sizes of the delay tables \;;
#X text 1148 60 Hit the string!;
#X text 1209 110 Nut termination \; 1 : free termination \; -1 : rigid
termination \;;
#X text 783 110 Bridge termination \; 1 : free termination \; -1 :
rigid termination \;;
#X obj 301 235 t b;
#X text 153 180 0.1;
#N canvas 0 0 450 300 (subpatch) 0;
#X array position 44100 float 0;
#X coords 0 1 44099 -1 700 200 1 0 0;
#X restore 828 302 graph;
#X obj 1571 229 change~;
#X obj 1570 312 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 1570 285 edge~;
#X obj 1570 257 expr~ $v1==0;
#X obj 1053 272 s~ a;
#X obj 1011 272 s~ v;
#X obj 972 272 s~ p;
#X obj 1405 77 t b b b;
#X obj 1416 211 r~ p;
#X obj 1435 155 r~ v;
#X obj 1455 99 r~ a;
#X obj 1570 337 t b b b;
#X text 196 698 Listen to the sound...;
#N canvas 0 0 450 300 (subpatch) 0;
#X array velocity 44100 float 0;
#X coords 0 1 44099 -1 700 200 1 0 0;
#X restore 828 527 graph;
#N canvas 0 0 450 300 (subpatch) 0;
#X array acceleration 44100 float 0;
#X coords 0 1 44099 -1 700 200 1 0 0;
#X restore 829 753 graph;
#X obj 1405 239 tabwrite~ position;
#X obj 1424 183 tabwrite~ velocity;
#X obj 1444 127 tabwrite~ acceleration;
#X msg 1609 366 \; acceleration normalize 1.2;
#X msg 1589 414 \; velocity normalize 1.2;
#X msg 1570 462 \; position normalize 1.2;
#X obj 733 35 cnv 15 250 60 empty empty empty 20 12 0 14 -260097 -66577
0;
#X text 748 56 ** PHYSICAL MODELLING OF A STRING **;
#X obj 1034 99 hradio 15 1 0 3 empty empty empty 0 -8 0 10 -260097
-1 -1 0;
#N canvas 751 71 628 350 excitationSelection 0;
#X obj -610 -75 == 0;
#X obj -625 -40 *~;
#X obj -435 -40 *~;
#X obj -235 -40 *~;
#X obj -420 -75 == 1;
#X obj -220 -75 == 2;
#X obj -723 -164 inlet;
#X obj -224 -169 inlet;
#X obj -516 73 outlet~;
#X text -731 -183 Selector;
#X text -222 -188 Bang!;
#X text -542 93 Excitation signal;
#X obj -719 -56 pluckedString~;
#X obj -564 -56 bowedString~;
#X obj -373 -56 struckString~;
#X connect 0 0 1 1;
#X connect 1 0 8 0;
#X connect 2 0 8 0;
#X connect 3 0 8 0;
#X connect 4 0 2 1;
#X connect 5 0 3 1;
#X connect 6 0 0 0;
#X connect 6 0 4 0;
#X connect 6 0 5 0;
#X connect 7 0 12 0;
#X connect 7 0 13 0;
#X connect 7 0 14 0;
#X connect 12 0 1 0;
#X connect 13 0 2 0;
#X connect 14 0 3 0;
#X restore 999 149 pd excitationSelection;
#X text 1040 82 1 2 3;
#X text 358 755 Distortion;
#X text 991 33 1 - Plucked String \; 2 - Bowed String \; 3 - Struck
String \;;
#X obj 157 724 lop~ 2000;
#X obj 158 698 r~ p;
#X connect 1 0 3 0;
#X connect 2 0 3 0;
#X connect 3 0 18 6;
#X connect 4 0 2 0;
#X connect 5 0 1 0;
#X connect 6 0 8 0;
#X connect 7 0 8 0;
#X connect 8 0 18 0;
#X connect 9 0 7 0;
#X connect 10 0 6 0;
#X connect 11 0 117 0;
#X connect 11 0 134 1;
#X connect 12 0 13 0;
#X connect 13 0 14 0;
#X connect 15 0 18 5;
#X connect 16 0 2 0;
#X connect 17 0 7 0;
#X connect 18 0 116 0;
#X connect 18 1 115 0;
#X connect 18 2 114 0;
#X connect 20 0 69 1;
#X connect 21 0 20 0;
#X connect 22 0 69 1;
#X connect 23 0 24 0;
#X connect 24 0 44 0;
#X connect 25 0 26 0;
#X connect 26 0 27 0;
#X connect 28 0 29 0;
#X connect 29 0 30 0;
#X connect 31 0 32 0;
#X connect 32 0 46 0;
#X connect 32 0 48 0;
#X connect 34 0 37 0;
#X connect 35 0 34 0;
#X connect 37 0 36 0;
#X connect 38 0 39 0;
#X connect 39 0 42 0;
#X connect 40 0 39 1;
#X connect 40 0 41 0;
#X connect 41 0 39 0;
#X connect 42 0 50 0;
#X connect 45 0 92 0;
#X connect 47 0 40 0;
#X connect 48 0 51 0;
#X connect 48 0 34 0;
#X connect 49 0 48 0;
#X connect 50 0 43 0;
#X connect 50 0 48 1;
#X connect 50 0 49 0;
#X connect 51 0 52 1;
#X connect 51 0 53 0;
#X connect 52 0 55 0;
#X connect 53 0 52 0;
#X connect 54 0 52 0;
#X connect 55 0 56 0;
#X connect 56 0 57 0;
#X connect 56 0 34 1;
#X connect 56 0 35 0;
#X connect 69 0 19 0;
#X connect 69 0 19 1;
#X connect 70 0 20 0;
#X connect 71 0 18 1;
#X connect 72 0 18 3;
#X connect 73 0 18 4;
#X connect 74 0 78 0;
#X connect 75 0 76 0;
#X connect 78 0 75 0;
#X connect 79 0 80 0;
#X connect 80 0 83 0;
#X connect 84 0 88 0;
#X connect 85 0 87 0;
#X connect 86 0 91 0;
#X connect 87 0 89 0;
#X connect 88 0 90 0;
#X connect 88 0 89 1;
#X connect 89 0 86 0;
#X connect 90 0 89 0;
#X connect 92 0 31 0;
#X connect 93 0 94 0;
#X connect 93 0 107 0;
#X connect 94 0 92 1;
#X connect 94 0 95 0;
#X connect 107 0 92 0;
#X connect 110 0 113 0;
#X connect 111 0 121 0;
#X connect 112 0 111 0;
#X connect 113 0 112 0;
#X connect 117 0 125 0;
#X connect 117 1 126 0;
#X connect 117 2 127 0;
#X connect 118 0 110 0;
#X connect 118 0 125 0;
#X connect 119 0 126 0;
#X connect 120 0 127 0;
#X connect 121 0 130 0;
#X connect 121 1 129 0;
#X connect 121 2 128 0;
#X connect 133 0 134 0;
#X connect 134 0 18 2;
#X connect 138 0 69 0;
#X connect 138 0 0 1;
#X connect 138 0 0 0;
#X connect 139 0 138 0;
