#N canvas -9 -9 1920 978 10;
#X obj 21 95 soundfiler;
#X obj 21 43 openpanel;
#X obj 21 19 bng 15 250 50 0 empty empty empty 0 -6 0 8 -262144 -1
-1;
#X msg 21 69 read -resize \$1 array1;
#X text 46 17 load sound file;
#N canvas 0 0 450 300 (subpatch) 0;
#X array array1 67782 float 2;
#X coords 0 1 67782 -1 512 128 1 0 0;
#X restore 22 186 graph;
#X obj 961 686 myAddSynth;
#X obj 988 763 output~;
#X msg 276 105 \; pd dsp 0 \;;
#X msg 276 52 \; pd dsp 1 \;;
#X text 274 32 DSP ON;
#X text 274 86 DSP OFF;
#N canvas 0 0 450 300 (subpatch) 0;
#X array \$0-magnitude 256 float 0;
#X coords 0 127 255 0 256 100 1 0 0;
#X restore 185 445 graph;
#X text 182 544 0;
#X text 171 534 0;
#X text 159 438 127;
#X text 166 484 64;
#X obj 150 138 s arraySize;
#X floatatom 150 112 10 0 0 0 - - -;
#X obj 21 590 tabread4~ array1;
#X obj 21 563 line~;
#X obj 20 664 output~;
#X obj 21 504 pack;
#X msg 21 535 1 \, \$1 \$2;
#X obj 58 462 / 44.1;
#X floatatom 67 504 5 0 0 0 - - -;
#X obj 21 428 float;
#X obj 48 376 r arraySize;
#X floatatom 48 403 10 0 0 0 - - -;
#X msg 21 348 bang;
#X obj 21 462 - 2;
#X text 54 348 Play original sound file;
#N canvas 513 173 651 544 fft-analysis 0;
#X obj 15 164 *~;
#X obj 14 99 inlet~;
#X obj 15 218 rfft~;
#X obj 36 140 tabreceive~ \$0-hann;
#X obj 14 306 *~;
#X obj 56 306 *~;
#X obj 15 356 sqrt~;
#X obj 23 386 loadbang;
#X obj 23 449 tgl 15 0 empty empty empty 0 -6 0 8 -262144 -1 -1 1 1
;
#X msg 31 411 \; pd dsp 1;
#X obj 15 8 block~ 512;
#X text 225 131 tabreceive~ outputs array contents \,;
#X text 225 149 constantly \, every block. Here it's;
#X text 223 169 used to get the Hann window to;
#X text 225 187 multiply by the input.;
#X text 120 7 block~ object does no computation but declares this;
#X text 120 24 window to be operating at a different block size from
;
#X text 122 58 Fourier transform.;
#X text 121 40 the parent window. This determines the size of the;
#X text 76 99 The inlet~ automatically re-blocks to the new block size.
;
#X obj 15 332 +~;
#X text 94 308 Take the magnitude by squaring real and imaginary part
\, adding and taking square root.;
#X text 110 424 periodically graph the output. It appears every 512
samples (about 12 milliseconds) but we only update the graph 4 times
per second. The graph is back on the main (parent) window.;
#X text 82 215 forward real FFT. Like "fft~" \, but only one inlet
(for the real part) and only the first half of the output signals are
used. (The others are determined by symmetry: they're complex conjugates
of the first half \, in reverse order.) This takes 1/2 the CPU time
of "fft".;
#X obj 23 470 metro 10;
#X obj 14 498 tabwrite~ magnitude2;
#X connect 0 0 2 0;
#X connect 1 0 0 0;
#X connect 2 0 4 0;
#X connect 2 0 4 1;
#X connect 2 1 5 0;
#X connect 2 1 5 1;
#X connect 3 0 0 1;
#X connect 4 0 20 0;
#X connect 5 0 20 1;
#X connect 6 0 25 0;
#X connect 7 0 8 0;
#X connect 7 0 9 0;
#X connect 8 0 24 0;
#X connect 20 0 6 0;
#X connect 24 0 25 0;
#X restore 960 809 pd fft-analysis;
#X msg 398 16 bang;
#X obj 398 45 s mainBang;
#N canvas 0 0 450 300 (subpatch) 0;
#X array env1 7 float 0;
#X coords 0 1 6 0 256 100 1 0 0;
#X restore 603 19 graph;
#N canvas 0 0 450 300 (subpatch) 0;
#X array env2 7 float 0;
#X coords 0 1 6 0 256 100 1 0 0;
#X restore 603 152 graph;
#N canvas 0 0 450 300 (subpatch) 0;
#X array env3 7 float 0;
#X coords 0 1 6 0 256 100 1 0 0;
#X restore 603 285 graph;
#N canvas 0 0 450 300 (subpatch) 0;
#X array env4 7 float 0;
#X coords 0 1 6 0 256 100 1 0 0;
#X restore 602 418 graph;
#N canvas 0 0 450 300 (subpatch) 0;
#X array env5 7 float 0;
#X coords 0 1 6 0 256 100 1 0 0;
#X restore 601 553 graph;
#N canvas 0 0 450 300 (subpatch) 0;
#X array env6 7 float 0;
#X coords 0 1 6 0 256 100 1 0 0;
#X restore 601 688 graph;
#N canvas 0 0 450 300 (subpatch) 0;
#X array env7 7 float 0;
#X coords 0 1 6 0 256 100 1 0 0;
#X restore 601 822 graph;
#N canvas 0 0 450 300 (subpatch) 0;
#X array env8 7 float 0;
#X coords 0 1 6 0 256 100 1 0 0;
#X restore 600 956 graph;
#N canvas -9 -9 1920 978 FourierPeaksDetect 1;
#X obj 98 304 tabread4~ array1;
#X obj 98 275 line~;
#X floatatom 97 366 5 0 0 0 - - -;
#X msg 98 247 \$1 \, \$2 \$3;
#X obj 97 333 fiddle~ 2048 1 7 7;
#X obj 155 173 / 44.1;
#X floatatom 182 217 5 0 0 0 - - -;
#X obj 126 127 float;
#X obj 126 173 - 2;
#X obj 153 75 loadbang;
#X msg 153 100 2048;
#X obj 98 217 pack f f f;
#X obj 19 200 float;
#X obj 46 94 loadbang;
#X msg 46 119 1;
#X obj 19 144 t b;
#X obj 126 41 r mainBang;
#X obj 848 308 tabread4~ array1;
#X obj 848 279 line~;
#X floatatom 847 362 5 0 0 0 - - -;
#X msg 848 251 \$1 \, \$2 \$3;
#X obj 847 337 fiddle~ 2048 1 7 7;
#X obj 905 177 / 44.1;
#X floatatom 932 221 5 0 0 0 - - -;
#X obj 876 149 float;
#X obj 876 177 - 2;
#X obj 848 221 pack f f f;
#X obj 769 204 float;
#X obj 769 166 t b;
#X obj 876 51 r mainBang;
#X obj 1588 308 tabread4~ array1;
#X obj 1588 279 line~;
#X floatatom 1587 370 5 0 0 0 - - -;
#X msg 1588 251 \$1 \, \$2 \$3;
#X obj 1587 337 fiddle~ 2048 1 7 7;
#X obj 1645 177 / 44.1;
#X floatatom 1672 221 5 0 0 0 - - -;
#X obj 1616 131 float;
#X obj 1616 177 - 2;
#X obj 1588 221 pack f f f;
#X obj 1509 204 float;
#X obj 1509 148 t b;
#X obj 1616 45 r mainBang;
#X obj 1536 80 r arraySize;
#X obj 1536 112 - 2048;
#X obj 1643 80 r arraySize;
#X obj 1725 127 float;
#X obj 1752 75 loadbang;
#X msg 1752 100 2048;
#X obj 1725 46 r mainBang;
#X obj 254 407 r mainBang;
#X obj 982 411 r mainBang;
#X obj 1745 411 r mainBang;
#X obj 956 132 float;
#X obj 983 80 loadbang;
#X msg 983 105 2048;
#X obj 956 51 r mainBang;
#X obj 735 40 r arraySize;
#X obj 735 72 expr ($f1/2) - 1024;
#X obj 796 105 int;
#X obj 19 439 routeAmplitudes;
#X obj 747 443 routeHarmonics;
#X obj 1509 443 routeAmplitudes;
#X obj 903 122 +;
#X text 1616 20 Last Window;
#X text 846 16 Middle Window;
#X msg 19 777 \$1 1;
#X obj 19 803 tabwrite env1;
#X msg 312 469 \$1 1;
#X msg 270 512 \$1 1;
#X msg 228 555 \$1 1;
#X msg 186 600 \$1 1;
#X msg 144 645 \$1 1;
#X msg 102 689 \$1 1;
#X msg 60 733 \$1 1;
#X obj 60 759 tabwrite env2;
#X obj 102 715 tabwrite env3;
#X obj 144 671 tabwrite env4;
#X obj 186 626 tabwrite env5;
#X obj 228 581 tabwrite env6;
#X obj 270 538 tabwrite env7;
#X obj 312 495 tabwrite env8;
#X obj 805 975 tabwrite env2;
#X obj 844 896 tabwrite env3;
#X obj 883 816 tabwrite env4;
#X obj 922 736 tabwrite env5;
#X obj 961 656 tabwrite env6;
#X obj 1000 578 tabwrite env7;
#X obj 1040 499 tabwrite env8;
#X obj 1509 808 tabwrite env1;
#X obj 1550 764 tabwrite env2;
#X obj 1592 720 tabwrite env3;
#X obj 1634 676 tabwrite env4;
#X obj 1676 631 tabwrite env5;
#X obj 1718 586 tabwrite env6;
#X obj 1760 543 tabwrite env7;
#X obj 1802 500 tabwrite env8;
#X obj 766 1054 tabwrite env1;
#X obj 747 1081 s freq1;
#X obj 1353 1044 r mainBang;
#X obj 1117 1076 routeAmplitudes;
#X obj 1117 1441 tabwrite env1;
#X obj 1158 1397 tabwrite env2;
#X obj 1200 1353 tabwrite env3;
#X obj 1242 1309 tabwrite env4;
#X obj 1284 1264 tabwrite env5;
#X obj 1326 1219 tabwrite env6;
#X obj 1368 1176 tabwrite env7;
#X obj 1410 1133 tabwrite env8;
#X obj 533 1044 r mainBang;
#X obj 297 1076 routeAmplitudes;
#X obj 297 1441 tabwrite env1;
#X obj 338 1397 tabwrite env2;
#X obj 380 1353 tabwrite env3;
#X obj 422 1309 tabwrite env4;
#X obj 464 1264 tabwrite env5;
#X obj 506 1219 tabwrite env6;
#X obj 548 1176 tabwrite env7;
#X obj 590 1133 tabwrite env8;
#X text 434 653 Second Window;
#X text 95 11 First Window;
#X text 1254 653 Fourth Window;
#X obj 418 932 tabread4~ array1;
#X obj 418 903 line~;
#X floatatom 417 994 5 0 0 0 - - -;
#X msg 418 875 \$1 \, \$2 \$3;
#X obj 417 961 fiddle~ 2048 1 7 7;
#X obj 475 801 / 44.1;
#X floatatom 502 845 5 0 0 0 - - -;
#X obj 446 773 float;
#X obj 446 801 - 2;
#X obj 418 845 pack f f f;
#X obj 339 828 float;
#X obj 339 790 t b;
#X obj 446 675 r mainBang;
#X obj 526 756 float;
#X obj 553 704 loadbang;
#X msg 553 729 2048;
#X obj 526 675 r mainBang;
#X obj 305 664 r arraySize;
#X obj 366 729 int;
#X obj 473 746 +;
#X obj 1237 932 tabread4~ array1;
#X obj 1237 903 line~;
#X floatatom 1236 994 5 0 0 0 - - -;
#X msg 1237 875 \$1 \, \$2 \$3;
#X obj 1236 961 fiddle~ 2048 1 7 7;
#X obj 1294 801 / 44.1;
#X floatatom 1321 845 5 0 0 0 - - -;
#X obj 1265 773 float;
#X obj 1265 801 - 2;
#X obj 1237 845 pack f f f;
#X obj 1158 828 float;
#X obj 1158 790 t b;
#X obj 1265 675 r mainBang;
#X obj 1345 756 float;
#X obj 1372 704 loadbang;
#X msg 1372 729 2048;
#X obj 1345 675 r mainBang;
#X obj 1124 664 r arraySize;
#X obj 1185 729 int;
#X obj 1292 746 +;
#X obj 305 696 expr ($f1/4) - 1024;
#X obj 1124 696 expr 3*($f1/4) - 1024;
#X msg 297 1415 \$1 2;
#X msg 338 1371 \$1 2;
#X msg 380 1327 \$1 2;
#X msg 422 1283 \$1 2;
#X msg 464 1238 \$1 2;
#X msg 506 1193 \$1 2;
#X msg 548 1150 \$1 2;
#X msg 590 1107 \$1 2;
#X msg 766 1028 \$1 3;
#X msg 805 949 \$1 3;
#X msg 844 870 \$1 3;
#X msg 883 790 \$1 3;
#X msg 922 710 \$1 3;
#X msg 961 630 \$1 3;
#X msg 1000 552 \$1 3;
#X msg 1040 473 \$1 3;
#X msg 1117 1415 \$1 4;
#X msg 1158 1371 \$1 4;
#X msg 1200 1327 \$1 4;
#X msg 1242 1283 \$1 4;
#X msg 1284 1238 \$1 4;
#X msg 1326 1193 \$1 4;
#X msg 1368 1150 \$1 4;
#X msg 1410 1107 \$1 4;
#X msg 1509 782 \$1 5;
#X msg 1550 738 \$1 5;
#X msg 1592 694 \$1 5;
#X msg 1634 650 \$1 5;
#X msg 1676 605 \$1 5;
#X msg 1718 560 \$1 5;
#X msg 1760 517 \$1 5;
#X msg 1802 474 \$1 5;
#X obj 786 1001 s freq2;
#X obj 825 923 s freq3;
#X obj 864 843 s freq4;
#X obj 903 763 s freq5;
#X obj 942 683 s freq6;
#X obj 981 604 s freq7;
#X obj 1020 525 s freq8;
#X obj 635 378 s predictedPitch;
#X connect 0 0 4 0;
#X connect 1 0 0 0;
#X connect 3 0 1 0;
#X connect 4 0 2 0;
#X connect 4 4 60 0;
#X connect 5 0 6 0;
#X connect 5 0 11 2;
#X connect 7 0 5 0;
#X connect 7 0 8 0;
#X connect 7 0 15 0;
#X connect 8 0 11 1;
#X connect 9 0 10 0;
#X connect 10 0 7 1;
#X connect 11 0 3 0;
#X connect 12 0 11 0;
#X connect 13 0 14 0;
#X connect 14 0 12 1;
#X connect 15 0 12 0;
#X connect 16 0 7 0;
#X connect 17 0 21 0;
#X connect 18 0 17 0;
#X connect 19 0 203 0;
#X connect 20 0 18 0;
#X connect 21 0 19 0;
#X connect 21 4 61 0;
#X connect 22 0 23 0;
#X connect 22 0 26 2;
#X connect 24 0 25 0;
#X connect 24 0 28 0;
#X connect 25 0 26 1;
#X connect 26 0 20 0;
#X connect 27 0 26 0;
#X connect 28 0 27 0;
#X connect 29 0 24 0;
#X connect 30 0 34 0;
#X connect 31 0 30 0;
#X connect 33 0 31 0;
#X connect 34 0 32 0;
#X connect 34 4 62 0;
#X connect 35 0 36 0;
#X connect 35 0 39 2;
#X connect 37 0 38 0;
#X connect 37 0 41 0;
#X connect 38 0 39 1;
#X connect 39 0 33 0;
#X connect 40 0 39 0;
#X connect 41 0 40 0;
#X connect 42 0 37 0;
#X connect 43 0 44 0;
#X connect 44 0 40 1;
#X connect 45 0 37 1;
#X connect 46 0 35 0;
#X connect 47 0 48 0;
#X connect 48 0 46 1;
#X connect 49 0 46 0;
#X connect 50 0 60 1;
#X connect 51 0 61 1;
#X connect 52 0 62 1;
#X connect 53 0 22 0;
#X connect 54 0 55 0;
#X connect 55 0 53 1;
#X connect 55 0 63 1;
#X connect 56 0 53 0;
#X connect 57 0 58 0;
#X connect 58 0 59 0;
#X connect 59 0 27 1;
#X connect 59 0 63 0;
#X connect 60 0 66 0;
#X connect 60 1 74 0;
#X connect 60 2 73 0;
#X connect 60 3 72 0;
#X connect 60 4 71 0;
#X connect 60 5 70 0;
#X connect 60 6 69 0;
#X connect 60 7 68 0;
#X connect 61 0 98 0;
#X connect 61 1 172 0;
#X connect 61 2 196 0;
#X connect 61 3 173 0;
#X connect 61 4 197 0;
#X connect 61 5 174 0;
#X connect 61 6 198 0;
#X connect 61 7 175 0;
#X connect 61 8 199 0;
#X connect 61 9 176 0;
#X connect 61 10 200 0;
#X connect 61 11 177 0;
#X connect 61 12 201 0;
#X connect 61 13 178 0;
#X connect 61 14 202 0;
#X connect 61 15 179 0;
#X connect 62 0 188 0;
#X connect 62 1 189 0;
#X connect 62 2 190 0;
#X connect 62 3 191 0;
#X connect 62 4 192 0;
#X connect 62 5 193 0;
#X connect 62 6 194 0;
#X connect 62 7 195 0;
#X connect 63 0 24 1;
#X connect 66 0 67 0;
#X connect 68 0 81 0;
#X connect 69 0 80 0;
#X connect 70 0 79 0;
#X connect 71 0 78 0;
#X connect 72 0 77 0;
#X connect 73 0 76 0;
#X connect 74 0 75 0;
#X connect 99 0 100 1;
#X connect 100 0 180 0;
#X connect 100 1 181 0;
#X connect 100 2 182 0;
#X connect 100 3 183 0;
#X connect 100 4 184 0;
#X connect 100 5 185 0;
#X connect 100 6 186 0;
#X connect 100 7 187 0;
#X connect 109 0 110 1;
#X connect 110 0 164 0;
#X connect 110 1 165 0;
#X connect 110 2 166 0;
#X connect 110 3 167 0;
#X connect 110 4 168 0;
#X connect 110 5 169 0;
#X connect 110 6 170 0;
#X connect 110 7 171 0;
#X connect 122 0 126 0;
#X connect 123 0 122 0;
#X connect 125 0 123 0;
#X connect 126 0 124 0;
#X connect 126 4 110 0;
#X connect 127 0 128 0;
#X connect 127 0 131 2;
#X connect 129 0 130 0;
#X connect 129 0 133 0;
#X connect 130 0 131 1;
#X connect 131 0 125 0;
#X connect 132 0 131 0;
#X connect 133 0 132 0;
#X connect 134 0 129 0;
#X connect 135 0 127 0;
#X connect 136 0 137 0;
#X connect 137 0 135 1;
#X connect 137 0 141 1;
#X connect 138 0 135 0;
#X connect 139 0 162 0;
#X connect 140 0 132 1;
#X connect 140 0 141 0;
#X connect 141 0 129 1;
#X connect 142 0 146 0;
#X connect 143 0 142 0;
#X connect 145 0 143 0;
#X connect 146 0 144 0;
#X connect 146 4 100 0;
#X connect 147 0 148 0;
#X connect 147 0 151 2;
#X connect 149 0 150 0;
#X connect 149 0 153 0;
#X connect 150 0 151 1;
#X connect 151 0 145 0;
#X connect 152 0 151 0;
#X connect 153 0 152 0;
#X connect 154 0 149 0;
#X connect 155 0 147 0;
#X connect 156 0 157 0;
#X connect 157 0 155 1;
#X connect 157 0 161 1;
#X connect 158 0 155 0;
#X connect 159 0 163 0;
#X connect 160 0 152 1;
#X connect 160 0 161 0;
#X connect 161 0 149 1;
#X connect 162 0 140 0;
#X connect 163 0 160 0;
#X connect 164 0 111 0;
#X connect 165 0 112 0;
#X connect 166 0 113 0;
#X connect 167 0 114 0;
#X connect 168 0 115 0;
#X connect 169 0 116 0;
#X connect 170 0 117 0;
#X connect 171 0 118 0;
#X connect 172 0 97 0;
#X connect 173 0 82 0;
#X connect 174 0 83 0;
#X connect 175 0 84 0;
#X connect 176 0 85 0;
#X connect 177 0 86 0;
#X connect 178 0 87 0;
#X connect 179 0 88 0;
#X connect 180 0 101 0;
#X connect 181 0 102 0;
#X connect 182 0 103 0;
#X connect 183 0 104 0;
#X connect 184 0 105 0;
#X connect 185 0 106 0;
#X connect 186 0 107 0;
#X connect 187 0 108 0;
#X connect 188 0 89 0;
#X connect 189 0 90 0;
#X connect 190 0 91 0;
#X connect 191 0 92 0;
#X connect 192 0 93 0;
#X connect 193 0 94 0;
#X connect 194 0 95 0;
#X connect 195 0 96 0;
#X restore 398 129 pd FourierPeaksDetect;
#X text 590 108 0;
#X text 600 120 0;
#X text 800 117 arraySize/44100 [s];
#X text 589 12 1;
#X text 577 58 0.5;
#X text 600 253 0;
#X text 800 250 arraySize/44100 [s];
#X text 590 241 0;
#X text 589 145 1;
#X text 577 191 0.5;
#X text 599 386 0;
#X text 799 383 arraySize/44100 [s];
#X text 589 373 0;
#X text 588 277 1;
#X text 576 323 0.5;
#X text 598 519 0;
#X text 798 516 arraySize/44100 [s];
#X text 588 506 0;
#X text 587 410 1;
#X text 575 456 0.5;
#X text 598 654 0;
#X text 798 651 arraySize/44100 [s];
#X text 588 641 0;
#X text 587 545 1;
#X text 575 591 0.5;
#X text 597 789 0;
#X text 797 786 arraySize/44100 [s];
#X text 597 924 0;
#X text 797 921 arraySize/44100 [s];
#X text 596 1058 0;
#X text 796 1055 arraySize/44100 [s];
#X text 410 545 22050 [Hz];
#X text 331 427 Magnitude Spectrum;
#X obj 1234 603 r freq8;
#X obj 1195 518 r freq7;
#X obj 1156 433 r freq6;
#X obj 1117 348 r freq5;
#X obj 1078 264 r freq4;
#X obj 1039 179 r freq3;
#X obj 1000 91 r freq2;
#X obj 961 5 r freq1;
#X floatatom 961 32 5 0 0 0 - - -;
#X floatatom 1000 117 5 0 0 0 - - -;
#X floatatom 1039 205 5 0 0 0 - - -;
#X floatatom 1078 290 5 0 0 0 - - -;
#X floatatom 1117 375 5 0 0 0 - - -;
#X floatatom 1156 460 5 0 0 0 - - -;
#X floatatom 1195 544 5 0 0 0 - - -;
#X floatatom 1234 629 5 0 0 0 - - -;
#N canvas 0 0 1914 978 GenerateLine~ 0;
#X msg 81 221 set 0;
#X obj 81 153 t b;
#X obj 200 18 r arraySize;
#X obj 200 74 / 44.1;
#X obj 81 195 del;
#X floatatom 200 47 10 0 0 0 - - -;
#X obj 25 108 pack 7 f;
#X obj 95 91 float;
#X msg 25 136 \$1 \$2;
#X obj 25 294 line 0;
#X obj 95 21 r synthBang;
#X obj 25 469 tabread env1;
#X floatatom 25 501 10 0 0 0 - - -;
#X obj 25 593 pack f f;
#X obj 200 524 / 6;
#X obj 25 662 line~;
#X msg 25 627 \$1 \$2;
#X obj 106 678 snapshot~;
#X floatatom 106 703 0 0 0 0 - - -;
#X obj 106 628 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 1
1;
#X obj 173 576 float;
#X obj 106 652 metro 1;
#X obj 173 551 t b;
#X obj 25 534 change;
#X obj 26 703 s~ line1;
#X floatatom 267 501 10 0 0 0 - - -;
#X obj 267 593 pack f f;
#X obj 442 524 / 6;
#X obj 267 662 line~;
#X msg 267 627 \$1 \$2;
#X obj 348 678 snapshot~;
#X floatatom 348 703 0 0 0 0 - - -;
#X obj 415 576 float;
#X obj 348 652 metro 1;
#X obj 415 551 t b;
#X obj 267 534 change;
#X floatatom 509 502 10 0 0 0 - - -;
#X obj 509 594 pack f f;
#X obj 684 525 / 6;
#X obj 509 663 line~;
#X msg 509 628 \$1 \$2;
#X obj 590 679 snapshot~;
#X floatatom 590 704 0 0 0 0 - - -;
#X obj 657 577 float;
#X obj 590 653 metro 1;
#X obj 657 552 t b;
#X obj 509 535 change;
#X floatatom 751 502 10 0 0 0 - - -;
#X obj 751 594 pack f f;
#X obj 926 525 / 6;
#X obj 751 663 line~;
#X msg 751 628 \$1 \$2;
#X obj 832 679 snapshot~;
#X floatatom 832 704 0 0 0 0 - - -;
#X obj 899 577 float;
#X obj 832 653 metro 1;
#X obj 899 552 t b;
#X obj 751 535 change;
#X floatatom 995 502 10 0 0 0 - - -;
#X obj 995 594 pack f f;
#X obj 1170 525 / 6;
#X obj 995 663 line~;
#X msg 995 628 \$1 \$2;
#X obj 1076 679 snapshot~;
#X floatatom 1076 704 0 0 0 0 - - -;
#X obj 1143 577 float;
#X obj 1076 653 metro 1;
#X obj 1143 552 t b;
#X obj 995 535 change;
#X floatatom 1237 502 10 0 0 0 - - -;
#X obj 1237 594 pack f f;
#X obj 1412 525 / 6;
#X obj 1237 663 line~;
#X msg 1237 628 \$1 \$2;
#X obj 1318 679 snapshot~;
#X floatatom 1318 704 0 0 0 0 - - -;
#X obj 1385 577 float;
#X obj 1318 653 metro 1;
#X obj 1385 552 t b;
#X obj 1237 535 change;
#X floatatom 1479 503 10 0 0 0 - - -;
#X obj 1479 595 pack f f;
#X obj 1654 526 / 6;
#X obj 1479 664 line~;
#X msg 1479 629 \$1 \$2;
#X obj 1560 680 snapshot~;
#X floatatom 1560 705 0 0 0 0 - - -;
#X obj 1627 578 float;
#X obj 1560 654 metro 1;
#X obj 1627 553 t b;
#X obj 1479 536 change;
#X floatatom 1721 503 10 0 0 0 - - -;
#X obj 1721 595 pack f f;
#X obj 1721 664 line~;
#X msg 1721 629 \$1 \$2;
#X obj 1802 680 snapshot~;
#X floatatom 1802 705 0 0 0 0 - - -;
#X obj 1802 654 metro 1;
#X obj 1721 536 change;
#X obj 200 110 s duration;
#X obj 147 469 r duration;
#X obj 393 469 r duration;
#X obj 635 470 r duration;
#X obj 878 470 r duration;
#X obj 1118 470 r duration;
#X obj 1363 470 r duration;
#X obj 1605 471 r duration;
#X obj 1828 471 r duration;
#X obj 1883 526 / 6;
#X obj 1856 578 float;
#X obj 1856 553 t b;
#X obj 267 469 tabread env2;
#X obj 509 470 tabread env3;
#X obj 751 470 tabread env4;
#X obj 995 470 tabread env5;
#X obj 1237 470 tabread env6;
#X obj 1479 471 tabread env7;
#X obj 1721 471 tabread env8;
#X obj 1722 705 s~ line8;
#X obj 1480 705 s~ line7;
#X obj 1238 704 s~ line6;
#X obj 996 704 s~ line5;
#X obj 752 704 s~ line4;
#X obj 510 704 s~ line3;
#X obj 268 703 s~ line2;
#X obj 106 601 loadbang;
#X obj 348 627 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 1
1;
#X obj 348 600 loadbang;
#X obj 590 630 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 1
1;
#X obj 590 603 loadbang;
#X obj 1802 629 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1
1 1;
#X obj 1802 602 loadbang;
#X obj 1560 630 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1
1 1;
#X obj 1560 603 loadbang;
#X obj 1318 628 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1
1 1;
#X obj 1318 601 loadbang;
#X obj 1076 629 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1
1 1;
#X obj 1076 602 loadbang;
#X obj 832 629 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 1
1;
#X obj 832 602 loadbang;
#X text 272 110 Complete audio duration;
#X text 78 295 Defines read speed for the enveloppe tables;
#X text 23 723 Audio line that \; follows the shape \; of the enveloppe
table \;;
#X text 162 593 Time between 2 \; consecutive \; points in the \; enveloppe
tables \;;
#X connect 0 0 9 0;
#X connect 1 0 4 0;
#X connect 2 0 5 0;
#X connect 3 0 4 1;
#X connect 3 0 7 1;
#X connect 3 0 99 0;
#X connect 4 0 0 0;
#X connect 5 0 3 0;
#X connect 6 0 8 0;
#X connect 7 0 6 1;
#X connect 8 0 1 0;
#X connect 8 0 9 0;
#X connect 9 0 11 0;
#X connect 9 0 111 0;
#X connect 9 0 112 0;
#X connect 9 0 113 0;
#X connect 9 0 114 0;
#X connect 9 0 115 0;
#X connect 9 0 116 0;
#X connect 9 0 117 0;
#X connect 10 0 7 0;
#X connect 10 0 6 0;
#X connect 11 0 12 0;
#X connect 12 0 23 0;
#X connect 13 0 16 0;
#X connect 14 0 20 1;
#X connect 15 0 17 0;
#X connect 15 0 24 0;
#X connect 16 0 15 0;
#X connect 17 0 18 0;
#X connect 19 0 21 0;
#X connect 20 0 13 1;
#X connect 21 0 17 0;
#X connect 22 0 20 0;
#X connect 23 0 22 0;
#X connect 23 0 13 0;
#X connect 25 0 35 0;
#X connect 26 0 29 0;
#X connect 27 0 32 1;
#X connect 28 0 30 0;
#X connect 28 0 124 0;
#X connect 29 0 28 0;
#X connect 30 0 31 0;
#X connect 32 0 26 1;
#X connect 33 0 30 0;
#X connect 34 0 32 0;
#X connect 35 0 34 0;
#X connect 35 0 26 0;
#X connect 36 0 46 0;
#X connect 37 0 40 0;
#X connect 38 0 43 1;
#X connect 39 0 41 0;
#X connect 39 0 123 0;
#X connect 40 0 39 0;
#X connect 41 0 42 0;
#X connect 43 0 37 1;
#X connect 44 0 41 0;
#X connect 45 0 43 0;
#X connect 46 0 45 0;
#X connect 46 0 37 0;
#X connect 47 0 57 0;
#X connect 48 0 51 0;
#X connect 49 0 54 1;
#X connect 50 0 52 0;
#X connect 50 0 122 0;
#X connect 51 0 50 0;
#X connect 52 0 53 0;
#X connect 54 0 48 1;
#X connect 55 0 52 0;
#X connect 56 0 54 0;
#X connect 57 0 56 0;
#X connect 57 0 48 0;
#X connect 58 0 68 0;
#X connect 59 0 62 0;
#X connect 60 0 65 1;
#X connect 61 0 63 0;
#X connect 61 0 121 0;
#X connect 62 0 61 0;
#X connect 63 0 64 0;
#X connect 65 0 59 1;
#X connect 66 0 63 0;
#X connect 67 0 65 0;
#X connect 68 0 67 0;
#X connect 68 0 59 0;
#X connect 69 0 79 0;
#X connect 70 0 73 0;
#X connect 71 0 76 1;
#X connect 72 0 74 0;
#X connect 72 0 120 0;
#X connect 73 0 72 0;
#X connect 74 0 75 0;
#X connect 76 0 70 1;
#X connect 77 0 74 0;
#X connect 78 0 76 0;
#X connect 79 0 78 0;
#X connect 79 0 70 0;
#X connect 80 0 90 0;
#X connect 81 0 84 0;
#X connect 82 0 87 1;
#X connect 83 0 85 0;
#X connect 83 0 119 0;
#X connect 84 0 83 0;
#X connect 85 0 86 0;
#X connect 87 0 81 1;
#X connect 88 0 85 0;
#X connect 89 0 87 0;
#X connect 90 0 89 0;
#X connect 90 0 81 0;
#X connect 91 0 98 0;
#X connect 92 0 94 0;
#X connect 93 0 95 0;
#X connect 93 0 118 0;
#X connect 94 0 93 0;
#X connect 95 0 96 0;
#X connect 97 0 95 0;
#X connect 98 0 92 0;
#X connect 98 0 110 0;
#X connect 100 0 14 0;
#X connect 101 0 27 0;
#X connect 102 0 38 0;
#X connect 103 0 49 0;
#X connect 104 0 60 0;
#X connect 105 0 71 0;
#X connect 106 0 82 0;
#X connect 107 0 108 0;
#X connect 108 0 109 1;
#X connect 109 0 92 1;
#X connect 110 0 109 0;
#X connect 111 0 25 0;
#X connect 112 0 36 0;
#X connect 113 0 47 0;
#X connect 114 0 58 0;
#X connect 115 0 69 0;
#X connect 116 0 80 0;
#X connect 117 0 91 0;
#X connect 125 0 19 0;
#X connect 126 0 33 0;
#X connect 127 0 126 0;
#X connect 128 0 44 0;
#X connect 129 0 128 0;
#X connect 130 0 97 0;
#X connect 131 0 130 0;
#X connect 132 0 88 0;
#X connect 133 0 132 0;
#X connect 134 0 77 0;
#X connect 135 0 134 0;
#X connect 136 0 66 0;
#X connect 137 0 136 0;
#X connect 138 0 55 0;
#X connect 139 0 138 0;
#X restore 398 157 pd GenerateLine~;
#X text 432 15 Analyse!;
#X msg 398 73 bang;
#X text 432 72 Resynthesize!;
#X obj 398 102 s synthBang;
#X obj 979 61 r~ line1;
#X obj 1349 686 myAddSynth;
#X obj 1376 763 output~;
#X floatatom 1349 32 5 0 0 0 - - -;
#X floatatom 1388 117 5 0 0 0 - - -;
#X floatatom 1427 205 5 0 0 0 - - -;
#X floatatom 1466 290 5 0 0 0 - - -;
#X floatatom 1505 375 5 0 0 0 - - -;
#X floatatom 1544 460 5 0 0 0 - - -;
#X floatatom 1583 544 5 0 0 0 - - -;
#X floatatom 1622 629 5 0 0 0 - - -;
#X obj 1367 61 r~ line1;
#X obj 1583 5 r predictedPitch;
#X obj 1583 57 mtof;
#X floatatom 1583 33 5 0 0 0 - - -;
#X floatatom 1583 83 5 0 0 0 - - -;
#X obj 1583 318 s hfreq1;
#X obj 1609 289 s hfreq2;
#X obj 1640 263 s hfreq3;
#X obj 1673 236 s hfreq4;
#X obj 1705 209 s hfreq5;
#X obj 1738 182 s hfreq6;
#X obj 1771 155 s hfreq7;
#X obj 1804 128 s hfreq8;
#X obj 1349 5 r hfreq1;
#X obj 1388 91 r hfreq2;
#X obj 1427 179 r hfreq3;
#X obj 1466 264 r hfreq4;
#X obj 1505 348 r hfreq5;
#X obj 1544 433 r hfreq6;
#X obj 1583 518 r hfreq7;
#X obj 1622 603 r hfreq8;
#X obj 1609 260 * 2;
#X obj 1640 234 * 3;
#X obj 1673 207 * 4;
#X obj 1705 180 * 5;
#X obj 1738 153 * 6;
#X obj 1771 126 * 7;
#X obj 1804 99 * 8;
#X obj 1020 148 r~ line2;
#X obj 1059 234 r~ line3;
#X obj 1098 318 r~ line4;
#X obj 1137 403 r~ line5;
#X obj 1176 488 r~ line6;
#X obj 1214 573 r~ line7;
#X obj 1253 657 r~ line8;
#X obj 1408 148 r~ line2;
#X obj 1447 234 r~ line3;
#X obj 1486 318 r~ line4;
#X obj 1525 403 r~ line5;
#X obj 1564 488 r~ line6;
#X obj 1602 573 r~ line7;
#X obj 1641 657 r~ line8;
#X text 1042 722 Detection of each frequency peak;
#X text 1420 716 Assumption that the frequency components are harmonically
related;
#N canvas 513 173 651 544 fft-analysis 0;
#X obj 15 164 *~;
#X obj 14 99 inlet~;
#X obj 15 218 rfft~;
#X obj 36 140 tabreceive~ \$0-hann;
#X obj 14 306 *~;
#X obj 56 306 *~;
#X obj 15 356 sqrt~;
#X obj 23 386 loadbang;
#X obj 23 449 tgl 15 0 empty empty empty 0 -6 0 8 -262144 -1 -1 1 1
;
#X msg 31 411 \; pd dsp 1;
#X obj 15 8 block~ 512;
#X text 225 131 tabreceive~ outputs array contents \,;
#X text 225 149 constantly \, every block. Here it's;
#X text 223 169 used to get the Hann window to;
#X text 225 187 multiply by the input.;
#X text 120 7 block~ object does no computation but declares this;
#X text 120 24 window to be operating at a different block size from
;
#X text 122 58 Fourier transform.;
#X text 121 40 the parent window. This determines the size of the;
#X text 76 99 The inlet~ automatically re-blocks to the new block size.
;
#X obj 15 332 +~;
#X text 94 308 Take the magnitude by squaring real and imaginary part
\, adding and taking square root.;
#X text 110 424 periodically graph the output. It appears every 512
samples (about 12 milliseconds) but we only update the graph 4 times
per second. The graph is back on the main (parent) window.;
#X text 82 215 forward real FFT. Like "fft~" \, but only one inlet
(for the real part) and only the first half of the output signals are
used. (The others are determined by symmetry: they're complex conjugates
of the first half \, in reverse order.) This takes 1/2 the CPU time
of "fft".;
#X obj 23 470 metro 10;
#X obj 14 498 tabwrite~ magnitude3;
#X connect 0 0 2 0;
#X connect 1 0 0 0;
#X connect 2 0 4 0;
#X connect 2 0 4 1;
#X connect 2 1 5 0;
#X connect 2 1 5 1;
#X connect 3 0 0 1;
#X connect 4 0 20 0;
#X connect 5 0 20 1;
#X connect 6 0 25 0;
#X connect 7 0 8 0;
#X connect 7 0 9 0;
#X connect 8 0 24 0;
#X connect 20 0 6 0;
#X connect 24 0 25 0;
#X restore 1348 809 pd fft-analysis;
#N canvas 1161 214 478 291 Hann-window 0;
#N canvas 0 0 450 300 (subpatch) 0;
#X array \$0-hann 512 float 0;
#X coords 0 1 511 0 200 120 1;
#X restore 254 117 graph;
#X msg 132 131 0;
#X obj 26 180 osc~;
#X obj 26 132 samplerate~;
#X obj 26 203 *~ -0.5;
#X obj 26 226 +~ 0.5;
#X obj 18 251 tabwrite~ \$0-hann;
#X text 240 109 1;
#X text 233 227 0;
#X text 249 240 0;
#X obj 26 156 / 512;
#X obj 18 109 bng 15 250 50 0 empty empty empty 0 -6 0 8 -262144 -1
-1;
#X text 311 81 Hann window;
#X text 74 178 period 512;
#X text 51 83 recalculate Hann;
#X text 86 98 window table;
#X obj 18 14 loadbang;
#X msg 40 47 \; pd dsp 1;
#X text 435 243 511;
#X connect 1 0 2 1;
#X connect 2 0 4 0;
#X connect 3 0 10 0;
#X connect 4 0 5 0;
#X connect 5 0 6 0;
#X connect 10 0 2 0;
#X connect 11 0 3 0;
#X connect 11 0 1 0;
#X connect 11 0 6 0;
#X connect 16 0 11 0;
#X connect 16 0 17 0;
#X restore 131 686 pd Hann-window;
#N canvas 513 173 651 544 fft-analysis 0;
#X obj 15 164 *~;
#X obj 14 99 inlet~;
#X obj 15 218 rfft~;
#X obj 36 140 tabreceive~ \$0-hann;
#X obj 14 306 *~;
#X obj 56 306 *~;
#X obj 15 356 sqrt~;
#X obj 14 498 tabwrite~ \$0-magnitude;
#X obj 23 386 loadbang;
#X obj 23 449 tgl 15 0 empty empty empty 0 -6 0 8 -262144 -1 -1 1 1
;
#X msg 31 411 \; pd dsp 1;
#X obj 15 8 block~ 512;
#X text 225 131 tabreceive~ outputs array contents \,;
#X text 225 149 constantly \, every block. Here it's;
#X text 223 169 used to get the Hann window to;
#X text 225 187 multiply by the input.;
#X text 120 7 block~ object does no computation but declares this;
#X text 120 24 window to be operating at a different block size from
;
#X text 122 58 Fourier transform.;
#X text 121 40 the parent window. This determines the size of the;
#X text 76 99 The inlet~ automatically re-blocks to the new block size.
;
#X obj 15 332 +~;
#X text 94 308 Take the magnitude by squaring real and imaginary part
\, adding and taking square root.;
#X text 110 424 periodically graph the output. It appears every 512
samples (about 12 milliseconds) but we only update the graph 4 times
per second. The graph is back on the main (parent) window.;
#X text 82 215 forward real FFT. Like "fft~" \, but only one inlet
(for the real part) and only the first half of the output signals are
used. (The others are determined by symmetry: they're complex conjugates
of the first half \, in reverse order.) This takes 1/2 the CPU time
of "fft".;
#X obj 23 470 metro 10;
#X connect 0 0 2 0;
#X connect 1 0 0 0;
#X connect 2 0 4 0;
#X connect 2 0 4 1;
#X connect 2 1 5 0;
#X connect 2 1 5 1;
#X connect 3 0 0 1;
#X connect 4 0 21 0;
#X connect 5 0 21 1;
#X connect 6 0 7 0;
#X connect 8 0 9 0;
#X connect 8 0 10 0;
#X connect 9 0 25 0;
#X connect 21 0 6 0;
#X connect 25 0 7 0;
#X restore 128 664 pd fft-analysis;
#N canvas 0 0 450 300 (subpatch) 0;
#X array magnitude2 256 float 0;
#X coords 0 127 255 0 256 100 1 0 0;
#X restore 991 853 graph;
#X text 988 952 0;
#X text 977 942 0;
#X text 965 846 127;
#X text 972 892 64;
#X text 1216 953 22050 [Hz];
#X text 1137 835 Magnitude Spectrum;
#N canvas 0 0 450 300 (subpatch) 0;
#X array magnitude3 256 float 0;
#X coords 0 127 255 0 256 100 1 0 0;
#X restore 1381 851 graph;
#X text 1378 950 0;
#X text 1367 940 0;
#X text 1355 844 127;
#X text 1362 890 64;
#X text 1606 951 22050 [Hz];
#X text 1527 833 Magnitude Spectrum;
#X msg 21 122 \; array1 normalize;
#X connect 0 0 170 0;
#X connect 0 0 18 0;
#X connect 1 0 3 0;
#X connect 2 0 1 0;
#X connect 3 0 0 0;
#X connect 6 0 7 0;
#X connect 6 0 7 1;
#X connect 6 0 32 0;
#X connect 18 0 17 0;
#X connect 19 0 21 1;
#X connect 19 0 21 0;
#X connect 19 0 155 0;
#X connect 20 0 19 0;
#X connect 22 0 23 0;
#X connect 23 0 20 0;
#X connect 24 0 22 1;
#X connect 24 0 25 0;
#X connect 26 0 24 0;
#X connect 26 0 30 0;
#X connect 27 0 28 0;
#X connect 28 0 26 1;
#X connect 29 0 26 0;
#X connect 30 0 22 0;
#X connect 33 0 34 0;
#X connect 77 0 92 0;
#X connect 78 0 91 0;
#X connect 79 0 90 0;
#X connect 80 0 89 0;
#X connect 81 0 88 0;
#X connect 82 0 87 0;
#X connect 83 0 86 0;
#X connect 84 0 85 0;
#X connect 85 0 6 0;
#X connect 86 0 6 2;
#X connect 87 0 6 4;
#X connect 88 0 6 6;
#X connect 89 0 6 8;
#X connect 90 0 6 10;
#X connect 91 0 6 12;
#X connect 92 0 6 14;
#X connect 95 0 97 0;
#X connect 98 0 6 1;
#X connect 99 0 100 0;
#X connect 99 0 100 1;
#X connect 99 0 153 0;
#X connect 101 0 99 0;
#X connect 102 0 99 2;
#X connect 103 0 99 4;
#X connect 104 0 99 6;
#X connect 105 0 99 8;
#X connect 106 0 99 10;
#X connect 107 0 99 12;
#X connect 108 0 99 14;
#X connect 109 0 99 1;
#X connect 110 0 112 0;
#X connect 111 0 113 0;
#X connect 112 0 111 0;
#X connect 113 0 114 0;
#X connect 113 0 130 0;
#X connect 113 0 131 0;
#X connect 113 0 132 0;
#X connect 113 0 133 0;
#X connect 113 0 134 0;
#X connect 113 0 135 0;
#X connect 113 0 136 0;
#X connect 122 0 101 0;
#X connect 123 0 102 0;
#X connect 124 0 103 0;
#X connect 125 0 104 0;
#X connect 126 0 105 0;
#X connect 127 0 106 0;
#X connect 128 0 107 0;
#X connect 129 0 108 0;
#X connect 130 0 115 0;
#X connect 131 0 116 0;
#X connect 132 0 117 0;
#X connect 133 0 118 0;
#X connect 134 0 119 0;
#X connect 135 0 120 0;
#X connect 136 0 121 0;
#X connect 137 0 6 3;
#X connect 138 0 6 5;
#X connect 139 0 6 7;
#X connect 140 0 6 9;
#X connect 141 0 6 11;
#X connect 142 0 6 13;
#X connect 143 0 6 15;
#X connect 144 0 99 3;
#X connect 145 0 99 5;
#X connect 146 0 99 7;
#X connect 147 0 99 9;
#X connect 148 0 99 11;
#X connect 149 0 99 13;
#X connect 150 0 99 15;
